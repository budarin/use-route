# @budarin/use-route

**–ú–∏–Ω–∏–º—É–º –∫–æ–¥–∞. –ú–∞–∫—Å–∏–º—É–º SPA-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏.**

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Ö—É–∫ –¥–ª—è React 18+ + Typescript –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º **Navigation API –∏ URLPattern**, –±–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤, –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –±–µ–∑ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**

- **–°–ª–æ–π –¥–ª—è —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤** ‚Äî —Ä–æ—É—Ç–∏–Ω–≥ –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ URL –∏ –∏—Å—Ç–æ—Ä–∏—é, –∞ –¥–µ—Ä–µ–≤–æ —ç–∫—Ä–∞–Ω–æ–≤, –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, guards –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –∂–∏–≤—É—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
- **–ë–∞–∑–∞ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** ‚Äî –ø–æ–≤–µ—Ä—Ö `useRoute()` –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –ª—é–±—ã–µ `<Link>`, `<Route>`‚Äë–ø–æ–¥–æ–±–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ `layout‚Äë—ã` –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω/UX, –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞—è—Å—å –∫ —á—É–∂–æ–º—É —Ä–æ—É—Ç–µ—Ä—É.


[![CI](https://github.com/budarin/use-route/actions/workflows/ci.yml/badge.svg?branch=master)](https://github.com/budarin/use-route/actions/workflows/ci.yml)
[![npm](https://img.shields.io/npm/v/@budarin/use-route?color=cb0000)](https://www.npmjs.com/package/@budarin/use-route)
[![npm](https://img.shields.io/npm/dt/@budarin/use-route)](https://www.npmjs.com/package/@budarin/use-route)
[![bundle](https://img.shields.io/bundlephobia/minzip/@budarin/use-route)](https://bundlephobia.com/result?p=@budarin/use-route)
[![GitHub](https://img.shields.io/github/license/budarin/use-route)](https://github.com/budarin/use-route)

**–ñ–∏–≤–æ–µ –¥–µ–º–æ:** –∑–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏.

- [Open in StackBlitz](https://stackblitz.com/github/budarin/use-route/tree/master/demo)
- [Open in CodeSandbox](https://codesandbox.io/p/sandbox/github/budarin/use-route/tree/master/demo)

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π** - —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ö—É–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ –∏ –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –ø–æ pathname/params, –±–µ–∑ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ route tree
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å—è–º–∏ –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ **Navigation API** ‚Äî `navigation.navigate()`, `back()`, `forward()`, `traverseTo()`
- ‚úÖ **URLPattern** - –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —à–∞–±–ª–æ–Ω–∞ —Ä–æ—É—Ç–∞
- ‚úÖ **PathMatcher** - –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–æ—É—Ç–∞
- ‚úÖ **useSyncExternalStore** ‚Äî concurrent-safe, SSR-ready
- ‚úÖ **canGoBack(n), canGoForward(n)** ‚Äî —Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- ‚úÖ **O(1) –ø–æ–∏—Å–∫** –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ `historyIndex` —Ä–æ—É—Ç–∞
- ‚úÖ **state** ‚Äî —á—Ç–µ–Ω–∏–µ state —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **LRU –∫—ç—à URL** - –∫—ç—à —Ä–æ—É—Ç–æ–≤ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –ª–∏–º–∏—Ç–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
- ‚úÖ **0 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** ‚Äî –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - –ø—Ä–æ—Å—Ç–æ `useRoute()`
- ‚úÖ **~4 kB** gzipped (–∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥; —Å –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –≤ –±–∞–Ω–¥–ª–µ –º–µ–Ω—å—à–µ)

## ‚ö†Ô∏è –ö–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- **–ù—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤** ‚Äî —Ö—É–∫ —Ç—Ä–µ–±—É–µ—Ç Navigation API –∏ URLPattern (—Å–º. —Ç–∞–±–ª–∏—Ü—É –≤–µ—Ä—Å–∏–π). –î–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ –≤–æ–∑—å–º–∏—Ç–µ React Router, TanStack Router –∏–ª–∏ —Ä–æ—É—Ç–µ—Ä —Å –ø–æ–ª–∏—Ñ–∏–ª–ª–∞–º–∏.
- **–ù—É–∂–Ω—ã loaders –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–æ—É—Ç–µ—Ä–µ** ‚Äî –∑–¥–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ –∑–æ–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏; –µ—ë –¥–µ–ª–∞—é—Ç use cases –∏ —Å–µ—Ä–≤–∏—Å—ã. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ loaders/–¥–∞–Ω–Ω—ã–µ ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª –≤ –º–∞—Ä—à—Ä—É—Ç–µ ‚Äî –ø–æ–¥–æ–π–¥—É—Ç React Router (loaders) –∏–ª–∏ TanStack Router.
- **–ù—É–∂–Ω–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–µ –¥–µ—Ä–µ–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤** ‚Äî —Ö—É–∫ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `<Route>` / `<Routes>`; —á—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å, –≤—ã —Ä–µ—à–∞–µ—Ç–µ –≤ –∫–æ–¥–µ –ø–æ `pathname`/`params`. –ï—Å–ª–∏ –≤–∞–∂–Ω–∞ –∏–º–µ–Ω–Ω–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–¥–∏–Ω –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤.
- **–ù—É–∂–Ω—ã –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ guards, redirects, lazy-—Ä–æ—É—Ç—ã** ‚Äî —ç—Ç–æ–≥–æ –≤ –ø–∞–∫–µ—Ç–µ –Ω–µ—Ç; —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ø–æ–≤–µ—Ä—Ö —Ö—É–∫–∞.

–í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã, —á–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã) –ø–∞–∫–µ—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
npm i @budarin/use-route
```

```typescript
import { useRoute, configureRoute } from '@budarin/use-route';


function App() {
    const {
        pathname,
        params,
        searchParams,
        navigate,
        go,
        canGoBack
    } = useRoute('/users/:id'); // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ params

    return (
        <div>
            <h1>Current: {pathname}</h1>
            <p>User ID: {params.id}</p>

            <button onClick={() => navigate('/users/123')}>
                To Profile
            </button>

            <button onClick={() => go(-1)} disabled={!canGoBack()}>
                ‚Üê Back
            </button>
        </div>
    );
}
```

## üìñ API

### `useRoute(pattern?: string | PathMatcher, options?: UseRouteOptions)`<br />`useRoute(options: UseRouteOptions)`

**–§–æ—Ä–º—ã –≤—ã–∑–æ–≤–∞:**

- **`useRoute()`** ‚Äî –±–µ–∑ pattern –∏ –æ–ø—Ü–∏–π.
- **`useRoute(pattern)`** ‚Äî —Ç–æ–ª—å–∫–æ pattern (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ PathMatcher).
- **`useRoute(pattern, options)`** ‚Äî pattern –∏ –æ–ø—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä `section`).
- **`useRoute({ section: '/dashboard' })`** ‚Äî —Ç–æ–ª—å–∫–æ –æ–ø—Ü–∏–∏, –±–µ–∑ pattern (—Ä–∞–∑–¥–µ–ª –ø–æ–¥ –≥–ª–æ–±–∞–ª—å–Ω—ã–º base; pathname –∏ navigate –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–∞).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**

- **`pattern`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚Äî —Å—Ç—Ä–æ–∫–∞-–ø–∞—Ç—Ç–µ—Ä–Ω (URLPattern) –∏–ª–∏ PathMatcher –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ `params` –∏ `matched`.
- **`options`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

    **`section`**: –ø—É—Ç—å —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–¥ –≥–ª–æ–±–∞–ª—å–Ω—ã–º base (–Ω–∞–ø—Ä–∏–º–µ—Ä `/dashboard`). `navigate(to)` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –ø—É—Ç—è–º –ø–æ–ª–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å (base + section). –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç—Å—è —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º `base` –∏–∑ `configureRoute`, –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –µ–≥–æ. –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ä–∞–∑–¥–µ–ª–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ `useRoute({ section: '/dashboard' })` –∏ —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å –ø—É—Ç—è–º–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª–∞.

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**

```typescript
{
    // –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    location: string;
    pathname: string;
    searchParams: URLSearchParams; // —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ, –Ω–µ –º—É—Ç–∏—Ä–æ–≤–∞—Ç—å
    params: Record<string, string>;
    historyIndex: number;
    state?: unknown; // state —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏ (getState() / history.state)
    matched?: boolean; // true/false –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º pattern, –∏–Ω–∞—á–µ undefined

    // –ù–∞–≤–∏–≥–∞—Ü–∏—è
    navigate: (to: string | URL, options?) => Promise<void>; // Navigation API; same-document –ø—Ä–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–µ navigate + intercept()
    back: () => void;
    forward: () => void;
    go: (delta: number) => void;
    replace: (to: string | URL, options?: NavigateOptions) => Promise<void>;
    updateState: (state: unknown) => void; // –æ–±–Ω–æ–≤–∏—Ç—å state —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
    canGoBack: (steps?: number) => boolean;
    canGoForward: (steps?: number) => boolean;
}
```

**–û–ø—Ü–∏–∏ –º–µ—Ç–æ–¥–æ–≤ `navigate` –∏ `replace`** (–æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å **NavigateOptions**):

```typescript
{
    history?: 'push' | 'replace' | 'auto'; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–∑ configureRoute –∏–ª–∏ 'auto'
    state?: unknown;   // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ (—Ç–æ–ª—å–∫–æ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è UX); –ø–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî —Ä–∞–∑–¥–µ–ª –ø—Ä–æ state –Ω–∏–∂–µ
    base?: string;     // –ø–æ–ª–Ω–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –¥–ª—è —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤–∞: '' –∏–ª–∏ '/' ‚Äî –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ (–¥—Ä—É–≥–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ); –∏–Ω–∞—á–µ ‚Äî –ø–æ–ª–Ω—ã–π –ø—É—Ç—å (–Ω–∞–ø—Ä. '/auth')
    section?: string;  // –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ –¥–ª—è —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤–∞: '' ‚Äî –∫–æ—Ä–µ–Ω—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ global base); '/path' ‚Äî –¥—Ä—É–≥–∞—è —Å–µ–∫—Ü–∏—è
}
```

**`state`** ‚Äî –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –≤–º–µ—Å—Ç–µ —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º –≤ `navigate(to, { state })` –∏–ª–∏ `replace(to, { state })`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ (—Å–∫—Ä–æ–ª–ª, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏, –ø—Ä–µ—Ñ–∏–ª–ª —Ñ–æ—Ä–º—ã): —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –ø—Ä–∏ –∑–∞—Ö–æ–¥–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ –±–µ–∑ state. –ü–æ–¥—Ä–æ–±–Ω–æ: —Å–º. –Ω–∏–∂–µ ¬´–ü–∞—Ä–∞–º–µ—Ç—Ä state: –∫–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é¬ª.

**`replace(to, options?)`** ‚Äî —Ç–æ –∂–µ, —á—Ç–æ `navigate(to, { ...options, history: 'replace' })`. –û–ø—Ü–∏–∏ —Ç–µ –∂–µ, —á—Ç–æ —É **navigate** (state, base, section); –ø–æ–ª–µ **history** –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–≤—Å–µ–≥–¥–∞ –∑–∞–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏).

**`updateState(state)`** ‚Äî –æ–±–Ω–æ–≤–ª—è–µ—Ç state **—Ç–µ–∫—É—â–µ–π** –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏ –±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ —Ö—É–∫–∞ –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–≤—ã–π state; URL –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è. –£–¥–æ–±–Ω–æ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–∞ —Ñ–æ—Ä–º—ã, –ø–æ–∑–∏—Ü–∏–∏ —Å–∫—Ä–æ–ª–ª–∞ –∏ —Ç.–ø.

**–ü–∞—Ä–∞–º–µ—Ç—Ä state: –∫–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é –∏ –∫–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å**

–ú–Ω–æ–≥–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∏ —Ä–∞–∑—É –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç state –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. State –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —É–∑–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö. –ù–∏–∂–µ ‚Äî –∫–æ–≥–¥–∞ –µ–≥–æ —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–ª—è—Ç—å, –∫–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏ –∫–∞–∫–æ–µ –Ω–µ–ª—å–∑—è, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –Ω–µ–¥–æ–ø–æ–Ω–∏–º–∞–Ω–∏–π.

**–ß—Ç–æ —Ç–∞–∫–æ–µ state –∏ –æ—Ç–∫—É–¥–∞ –æ–Ω –±–µ—Ä—ë—Ç—Å—è.** State ‚Äî —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ –≤ `navigate(to, { state })` –∏–ª–∏ `replace(to, { state })`. –û–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏ (Navigation API) –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ö—É–∫–µ —á–µ—Ä–µ–∑ –ø–æ–ª–µ **`state`** –≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–º –æ–±—ä–µ–∫—Ç–µ. **–í–∞–∂–Ω–æ:** state –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ (–≤–∞—à –≤—ã–∑–æ–≤ navigate/replace). –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–ª –Ω–∞ —Ç–æ—Ç –∂–µ URL –∏–∑–≤–Ω–µ ‚Äî –≤–≤—ë–ª –∞–¥—Ä–µ—Å –≤ —Å—Ç—Ä–æ–∫–µ, –ø–µ—Ä–µ—à—ë–ª –ø–æ –±—É–∫–º–∞—Ä–∫—É, –ø–æ —Å—Å—ã–ª–∫–µ —Å –¥—Ä—É–≥–æ–≥–æ —Å–∞–π—Ç–∞, –æ–±–Ω–æ–≤–∏–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Äî –¥–ª—è —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏ state –Ω–µ—Ç. –ü–æ—ç—Ç–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ –¥–æ–ª–∂–Ω–æ –æ—Ç state –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–∏—Å–µ—Ç—å.

**–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å state –≤ –∏—Å—Ç–æ—Ä–∏—é.** –î–æ–±–∞–≤–ª—è–π—Ç–µ state —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å ¬´–ø–æ–¥—Å–∫–∞–∑–∫—É¬ª –¥–ª—è —Ü–µ–ª–µ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä–∞—è —É–ª—É—á—à–∞–µ—Ç UX –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

- **–ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞** ‚Äî —É—Ö–æ–¥—è —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–ø–∏—Å–∫–∞, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç–µ –≤ state –ø–æ–∑–∏—Ü–∏—é —Å–∫—Ä–æ–ª–ª–∞; –ø–æ ¬´–ù–∞–∑–∞–¥¬ª –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ç–æ –∂–µ –º–µ—Å—Ç–æ. –ï—Å–ª–∏ –∑–∞—à–ª–∏ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ ‚Äî state –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Å–ø–∏—Å–æ–∫ —Å –Ω–∞—á–∞–ª–∞.
- **–ü–æ–¥—Å–∫–∞–∑–∫–∞ ¬´–æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏¬ª** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ —Å –ø–æ–∏—Å–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É: –≤ state –ø–µ—Ä–µ–¥–∞—ë—Ç–µ `{ from: 'search', highlight: 'keyword' }`; –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –º–æ–∂–Ω–æ –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å —Å–ª–æ–≤–æ. –ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –Ω–µ—Ç ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Å—Ç–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π.
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–ª–ª —Ñ–æ—Ä–º—ã** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª –∏–∑ —Å–ø–∏—Å–∫–∞: –≤ state –ø–µ—Ä–µ–¥–∞—ë—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫; –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ state –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç–µ –µ–≥–æ, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî –≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ id –∏–∑ URL/—Å–µ—Ä–≤–µ—Ä–∞.
- **–ß–µ—Ä–Ω–æ–≤–∏–∫ —Ñ–æ—Ä–º—ã –Ω–∞ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ** ‚Äî –ø—Ä–∏ –≤–≤–æ–¥–µ –≤ —Ñ–æ—Ä–º—É –º–æ–∂–Ω–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –≤ state —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ `updateState(draft)`; –ø–æ ¬´–ù–∞–∑–∞–¥¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—ë—Ç—Å—è –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ç–µ–º –∂–µ state, –∏ –≤—ã –ø–æ–¥—Å—Ç–∞–≤–∏—Ç–µ —á–µ—Ä–Ω–æ–≤–∏–∫. –ë–µ–∑ state –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç–µ –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É –∏–ª–∏ –≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ URL.
- **–ò—Å—Ç–æ—á–Ω–∏–∫ –ø–µ—Ä–µ—Ö–æ–¥–∞ (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞, UI)** ‚Äî –≤ state –ø–µ—Ä–µ–¥–∞—ë—Ç–µ `{ source: 'dashboard' }`; —Ü–µ–ª–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —ç—Ç–æ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏–ª–∏ —á—É—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å UI. –ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ –±–µ–∑ state —Å—á–∏—Ç–∞–µ—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ ¬´–ø—Ä—è–º–æ–π¬ª –∏–ª–∏ ¬´unknown¬ª.

**–ö–∞–∫–æ–µ state –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å.** –¢–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è **–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —É–ª—É—á—à–µ–Ω–∏–µ–º**: –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞, —Ñ–ª–∞–≥–∏ ¬´–æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏¬ª, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–µ—Ñ–∏–ª–ª, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –ü—Ä–∞–≤–∏–ª–æ: —Ü–µ–ª–µ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –±–µ–∑ state (–ø—Ä–∏ –ø—Ä—è–º–æ–º –∑–∞—Ö–æ–¥–µ –ø–æ URL).

**–ö–∞–∫–æ–µ state –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å.** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ state –¥–ª—è —Ç–æ–≥–æ, –±–µ–∑ —á–µ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω–æ:

- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑ state. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –ø–æ —Å—Å—ã–ª–∫–µ `/search?q=foo` state –Ω–µ—Ç ‚Äî —ç–∫—Ä–∞–Ω –ø—É—Å—Ç–æ–π. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—Ä–∞—Ç—å—Å—è –∏–∑ query –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞.
- **–¢–æ, —á—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ URL (—à–∞—Ä–∏–Ω–≥, –±—É–∫–º–∞—Ä–∫)** ‚Äî state –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ URL. –ï—Å–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–ª–∂–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –ø–æ –æ–¥–Ω–æ–π —Å—Å—ã–ª–∫–µ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ pathname –∏ query, –Ω–µ state.
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø—Ä–∞–≤–∞, –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî –Ω–µ –æ–ø–∏—Ä–∞–π—Ç–µ—Å—å –Ω–∞ state: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å URL –Ω–∞–ø—Ä—è–º—É—é. –ü—Ä–æ–≤–µ—Ä–∫–∏ ‚Äî –ø–æ —Å–µ—Å—Å–∏–∏/—Å–µ—Ä–≤–µ—Ä—É.
- **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Äî —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è URL –∏ –¥–∞–Ω–Ω—ã–º–∏ —Å –±—ç–∫–µ–Ω–¥–∞. State ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫, –Ω–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã.

**–ò—Ç–æ–≥.** State –≤ –∏—Å—Ç–æ—Ä–∏–∏ ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è ¬´–ø–µ—Ä–µ–¥–∞—Ç—å —á—Ç–æ-—Ç–æ –≤–º–µ—Å—Ç–µ —Å –ø–µ—Ä–µ—Ö–æ–¥–æ–º¬ª, –∫–æ–≥–¥–∞ —ç—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ, –∞ –Ω–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ. –ï—Å–ª–∏ —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å ‚Äî –º–æ–∂–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å; –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ pathname, query –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.

**`configureRoute(config)`** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ **–æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**. –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞: –≤—ã–∑—ã–≤–∞–π—Ç–µ `configureRoute` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ; —Å–º–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥–∞ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫—ç—à–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è).

```typescript
configureRoute({
    urlCacheLimit: 50, // –ª–∏–º–∏—Ç LRU-–∫—ç—à–∞ URL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
    defaultHistory: 'replace', // history –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –≤—Å–µ—Ö navigate()
    logger: myLogger, // –ª–æ–≥–≥–µ—Ä (–¥–µ—Ñ–æ–ª—Ç: console)
    base: '/app', // –±–∞–∑–æ–≤—ã–π –ø—É—Ç—å: pathname –±–µ–∑ base, navigate(to) –¥–æ–±–∞–≤–ª—è–µ—Ç base –∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –ø—É—Ç—è–º
    initialLocation: request.url, // –¥–ª—è SSR: –Ω–∞—á–∞–ª—å–Ω—ã–π URL –ø—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ—Ç window)
});
```

**`base`** (–≥–ª–æ–±–∞–ª—å–Ω—ã–π) ‚Äî –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ **–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–µ –≤ –∫–æ—Ä–Ω–µ –¥–æ–º–µ–Ω–∞**, –∞ –ø–æ –ø–æ–¥–ø—É—Ç–∏. –ü—Ä–∏–º–µ—Ä: —Å–∞–π—Ç `https://example.com/` ‚Äî –∫–æ—Ä–µ–Ω—å; –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–¥–∞—ë—Ç—Å—è –ø–æ `https://example.com/app/`, —Ç–æ –µ—Å—Ç—å –≤—Å–µ –µ–≥–æ –º–∞—Ä—à—Ä—É—Ç—ã —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ª–µ–∂–∞—Ç –ø–æ–¥ –ø—É—Ç—ë–º `/app`. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–∞–¥–∞–π—Ç–µ `base: '/app'`: `navigate('/dashboard')` –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/app/dashboard`. –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ—Ä–Ω–µ –¥–æ–º–µ–Ω–∞ (`https://example.com/`), –≥–ª–æ–±–∞–ª—å–Ω—ã–π `base` –∑–∞–¥–∞–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

**`initialLocation`** ‚Äî –ø—Ä–∏ SSR (–Ω–µ—Ç `window`) —Ö—É–∫ –Ω–µ –∑–Ω–∞–µ—Ç URL –∑–∞–ø—Ä–æ—Å–∞. –ó–∞–¥–∞–π—Ç–µ `initialLocation: request.url` (–∏–ª–∏ –ø–æ–ª–Ω—ã–π URL —Å—Ç—Ä–∞–Ω–∏—Ü—ã) –æ–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–∞ ‚Äî —Ç–æ–≥–¥–∞ `pathname` –∏ `searchParams` –±—É–¥—É—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—É. –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–¥–∞–≤–∞—Ç—å –Ω–µ –Ω—É–∂–Ω–æ:** –µ—Å–ª–∏ –Ω–∞ SSR `initialLocation` –Ω–µ –∑–∞–¥–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `'/'` (pathname –∏ searchParams –¥–ª—è –∫–æ—Ä–Ω—è).

**`logger`** —Ç–∏–ø `Logger` ‚Äî –æ–±—ä–µ–∫—Ç —Å –º–µ—Ç–æ–¥–∞–º–∏ `trace`, `debug`, `info`, `warn`, `error` (–∫–∞–∫ —É `console`). –£—Ä–æ–≤–Ω–∏: `LoggerLevel = 'trace' | 'debug' | 'info' | 'warn' | 'error'`. –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `console`.

**`pattern` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** —Å—Ç—Ä–æ–∫–∞-—à–∞–±–ª–æ–Ω –ø—É—Ç–∏ (–Ω–∞—Ç–∏–≤–Ω—ã–π **URLPattern**) –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è **PathMatcher**. –°–º. –Ω–∏–∂–µ.

**–°—Ç—Ä–æ–∫–∞ (URLPattern).** –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

- **–ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚Äî `:name` (–∏–º—è –∫–∞–∫ –≤ JS: –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, `_`). –ó–Ω–∞—á–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ `params[name]`.
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã** ‚Äî `{ ... }?`: —á–∞—Å—Ç—å –ø—É—Ç–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π. –û–¥–∏–Ω –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø—É—Ç–∏ —Ä–∞–∑–Ω–æ–π –≥–ª—É–±–∏–Ω—ã; –≤ `params` —Ç–æ–ª—å–∫–æ —Ç–µ –∫–ª—é—á–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —Å–µ–≥–º–µ–Ω—Ç –≤ URL.
- **Wildcard** ‚Äî `*`: —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å ¬´—Ö–≤–æ—Å—Ç–æ–º¬ª –ø—É—Ç–∏; –≤ `params` –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç (—á–∏—Å–ª–æ–≤—ã–µ –∫–ª—é—á–∏ –∏–∑ `groups` –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã).
- **Regexp –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ** ‚Äî `:name(—Ä–µ–≥—É–ª—è—Ä–∫–∞)` –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ —Å–µ–≥–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã). –í `params` –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Å—Ç—Ä–æ–∫–∞.

```typescript
useRoute('/users/:id');
useRoute('/elements/:elementId/*/:subElementId'); // wildcard

// –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã
useRoute('/users/:id{/posts/:postId}?');

// –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (regexp)
useRoute('/blog/:year(\\d+)/:month(\\d+)');

// –§—É–Ω–∫—Ü–∏—è-–º–∞—Ç—á–µ—Ä (–∏–µ—Ä–∞—Ä—Ö–∏—è, –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ä–∞–∑–±–æ—Ä)
const matchPost = (pathname: string) => ({ matched: pathname.startsWith('/posts/'), params: {} });
useRoute(matchPost);
```

–ü–æ–ª–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å URLPattern: [URL Pattern API (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/URL_Pattern_API), [WHATWG URL Pattern](https://urlpattern.spec.whatwg.org/).

**PathMatcher** ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏, –∫–æ–≥–¥–∞ –æ–¥–Ω–æ–≥–æ URLPattern –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (–∏–µ—Ä–∞—Ä—Ö–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –∫–∞—Å—Ç–æ–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–∞–∑–±–æ—Ä —á–µ—Ä–µ–∑ `split` –∏–ª–∏ RegExp). –•—É–∫ –≤—ã–∑—ã–≤–∞–µ—Ç –µ—ë —Å —Ç–µ–∫—É—â–∏–º `pathname` –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã–µ `matched` –∏ `params` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

- **–ü–∞—Ä–∞–º–µ—Ç—Ä:** `pathname: string` ‚Äî —Ç–µ–∫—É—â–∏–π pathname (–±–µ–∑ origin –∏ query).
- **–í–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø:** `{ matched: boolean; params: RouteParams }`.
  `matched` ‚Äî —Å–æ–≤–ø–∞–ª –ª–∏ –ø—É—Ç—å —Å –≤–∞—à–µ–π –ª–æ–≥–∏–∫–æ–π; `params` ‚Äî –æ–±—ä–µ–∫—Ç ¬´–∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ ‚Üí –∑–Ω–∞—á–µ–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–∞¬ª (—Ç–∏–ø `RouteParams` = `Record<RouteParamName, RouteParamValue>`).
- **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `postId` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `userId`), –ø—É—Ç–∏ —Å –∂—ë—Å—Ç–∫–∏–º –ø–æ—Ä—è–¥–∫–æ–º —Å–µ–≥–º–µ–Ω—Ç–æ–≤, –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—ã—Ä–∞–∑–∏—Ç—å –æ–¥–Ω–∏–º URLPattern.

## üõ† –ü—Ä–∏–º–µ—Ä—ã

### 1. –ë–∞–∑–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è (pathname, navigate)

```tsx
import { useRoute } from '@budarin/use-route';

function BasicNavigationExample() {
    const { pathname, navigate } = useRoute();

    return (
        <div>
            <p>–¢–µ–∫—É—â–∏–π –ø—É—Ç—å: {pathname}</p>
            <button type="button" onClick={() => navigate('/posts')}>
                –ö –ø–æ—Å—Ç–∞–º
            </button>
            <button type="button" onClick={() => navigate('/')}>
                –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
        </div>
    );
}
```

### 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏ (useRoute('/users/:id'), params)

```tsx
import { useRoute } from '@budarin/use-route';

function ParamsExample() {
    const { params, pathname, navigate } = useRoute('/users/:id');

    return (
        <div>
            <p>Pathname: {pathname}</p>
            <p>User ID –∏–∑ params: {params.id ?? '‚Äî'}</p>
            <button type="button" onClick={() => navigate('/users/123')}>
                User 123
            </button>
            <button type="button" onClick={() => navigate('/users/456')}>
                User 456
            </button>
        </div>
    );
}
```

### 3. Search params (query)

```tsx
import { useRoute } from '@budarin/use-route';

function SearchParamsExample() {
    const { searchParams, navigate, pathname } = useRoute('/posts');
    const pageParam = searchParams.get('page') ?? '1';
    const currentPage = Number.parseInt(pageParam, 10) || 1;

    return (
        <div>
            <p>–ü—É—Ç—å: {pathname}</p>
            <p>–°—Ç—Ä–∞–Ω–∏—Ü–∞: {currentPage}</p>
            <button
                type="button"
                onClick={() => navigate(`/posts?page=${currentPage - 1}`)}
                disabled={currentPage <= 1}
            >
                –ü—Ä–µ–¥. —Å—Ç—Ä–∞–Ω–∏—Ü–∞
            </button>
            <button type="button" onClick={() => navigate(`/posts?page=${currentPage + 1}`)}>
                –°–ª–µ–¥. —Å—Ç—Ä–∞–Ω–∏—Ü–∞
            </button>
        </div>
    );
}
```

### 4. –ò—Å—Ç–æ—Ä–∏—è (back, forward, go, canGoBack, canGoForward)

```tsx
import { useRoute } from '@budarin/use-route';

function HistoryExample() {
    const { go, back, forward, canGoBack, canGoForward } = useRoute();

    return (
        <div>
            <button type="button" onClick={() => back()} disabled={!canGoBack()}>
                ‚Üê –ù–∞–∑–∞–¥
            </button>
            <button type="button" onClick={() => go(-2)} disabled={!canGoBack(2)}>
                ‚Üê 2 —à–∞–≥–∞
            </button>
            <button type="button" onClick={() => go(1)} disabled={!canGoForward()}>
                –í–ø–µ—Ä—ë–¥ ‚Üí
            </button>
            <button type="button" onClick={() => forward()} disabled={!canGoForward()}>
                Forward
            </button>
        </div>
    );
}
```

### 5. Push –∏ replace (–∏ –º–µ—Ç–æ–¥ replace())

```tsx
import { useRoute } from '@budarin/use-route';

function PushReplaceExample() {
    const { navigate, replace, pathname } = useRoute();

    return (
        <div>
            <p>–¢–µ–∫—É—â–∏–π –ø—É—Ç—å: {pathname}</p>
            <button type="button" onClick={() => navigate('/step-push', { history: 'push' })}>
                –ü–µ—Ä–µ–π—Ç–∏ (push) ‚Äî –≤ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å
            </button>
            <button type="button" onClick={() => navigate('/step-replace', { history: 'replace' })}>
                –ü–µ—Ä–µ–π—Ç–∏ (replace —á–µ—Ä–µ–∑ navigate)
            </button>
            <button type="button" onClick={() => replace('/step-replace-method')}>
                –ü–µ—Ä–µ–π—Ç–∏ —á–µ—Ä–µ–∑ replace() ‚Äî —Ç–æ –∂–µ, —á—Ç–æ history: 'replace'
            </button>
        </div>
    );
}
```

### 6. State (—á—Ç–µ–Ω–∏–µ, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –º–µ—Å—Ç–µ)

State —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ö—É–∫–µ –∫–∞–∫ **`state`**. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å state –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ ‚Äî —á–µ—Ä–µ–∑ –æ–ø—Ü–∏—é **`state`** –≤ `navigate` –∏–ª–∏ `replace`. –û–±–Ω–æ–≤–∏—Ç—å state **—Ç–µ–∫—É—â–µ–π** —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ ‚Äî **`updateState(state)`**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫ (—Å–∫—Ä–æ–ª–ª, –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∏, –ø—Ä–µ—Ñ–∏–ª–ª —Ñ–æ—Ä–º—ã); —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –ø—Ä–∏ –∑–∞—Ö–æ–¥–µ –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ –±–µ–∑ state.

```tsx
import { useRoute } from '@budarin/use-route';

function StateExample() {
    const { state, navigate, updateState, pathname } = useRoute();

    return (
        <div>
            <p>–¢–µ–∫—É—â–∏–π –ø—É—Ç—å: {pathname}</p>
            <p>State –∑–∞–ø–∏—Å–∏: {state != null ? JSON.stringify(state) : '‚Äî'}</p>
            <button
                type="button"
                onClick={() => navigate('/detail', { state: { from: 'list', scrollY: 100 } })}
            >
                –ü–µ—Ä–µ–π—Ç–∏ —Å state
            </button>
            <button type="button" onClick={() => updateState({ draft: true, step: 2 })}>
                –û–±–Ω–æ–≤–∏—Ç—å state —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏ (–±–µ–∑ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
            </button>
        </div>
    );
}
```

### 7. matched (—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ pathname —Å pattern)

```tsx
import { useRoute } from '@budarin/use-route';

function MatchedExample() {
    const { pathname, matched, params } = useRoute('/users/:id');

    return (
        <div>
            <p>Pathname: {pathname}</p>
            <p>Pattern /users/:id —Å–æ–≤–ø–∞–ª: {matched === true ? '–¥–∞' : '–Ω–µ—Ç'}</p>
            {matched === true ? (
                <p>User ID: {params.id}</p>
            ) : (
                <p>–≠—Ç–æ –Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (path –Ω–µ —Å–æ–≤–ø–∞–ª —Å /users/:id).</p>
            )}
        </div>
    );
}
```

### 8. –§—É–Ω–∫—Ü–∏—è-–º–∞—Ç—á–µ—Ä (PathMatcher)

–£–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –æ–¥–∏–Ω URLPattern –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ–π regex –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è: –∏–µ—Ä–∞—Ä—Ö–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `postId` —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–µ —Å `userId`), –∫–∞—Å—Ç–æ–º–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ä–∞–∑–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–µ–≥–º–µ–Ω—Ç–æ–≤. –ù–∏–∂–µ ‚Äî –º–∞—Ç—á–µ—Ä –¥–ª—è `/users/:userId` –∏ `/users/:userId/posts/:postId`: –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –ø—Ä–∏—á—ë–º `postId` –¥–æ–ø—É—Å—Ç–∏–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ª–∏—Ç–µ—Ä–∞–ª–∞ `posts` –∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `userId`.

```tsx
import { useRoute, type PathMatcher } from '@budarin/use-route';

const matchUserPosts: PathMatcher = (pathname) => {
    const segments = pathname.split('/').filter(Boolean);

    if (segments[0] !== 'users' || !segments[1]) return { matched: false, params: {} };

    const params: Record<string, string> = { userId: segments[1] };

    if (segments[2] === 'posts' && segments[3]) {
        params.postId = segments[3];
    }

    return { matched: true, params };
};

function UserPostsExample() {
    const { pathname, matched, params } = useRoute(matchUserPosts);

    if (!matched) return null;

    return (
        <div>
            <p>–ü—É—Ç—å: {pathname}</p>
            <p>User ID: {params.userId}</p>
            {params.postId && <p>Post ID: {params.postId}</p>}
        </div>
    );
}
```

### 9. –ì–ª–æ–±–∞–ª—å–Ω—ã–π base (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ –ø–æ–¥–ø—É—Ç–∏, –Ω–µ –≤ –∫–æ—Ä–Ω–µ –¥–æ–º–µ–Ω–∞)

–ö–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è **–Ω–µ –≤ –∫–æ—Ä–Ω–µ –¥–æ–º–µ–Ω–∞**, –∞ –ø–æ –ø–æ–¥–ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä `https://example.com/app/` ‚Äî –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ–¥ `/app`), –∑–∞–¥–∞–π—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥–µ `base: '/app'`. –¢–æ–≥–¥–∞ `navigate(to)` –¥–æ–±–∞–≤–ª—è–µ—Ç base –∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º –ø—É—Ç—è–º. –î–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ ¬´–≤–Ω–µ¬ª —ç—Ç–æ–≥–æ –ø—É—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ `/login`) –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é `base` –≤ `navigate` –∏–ª–∏ `replace`: `navigate('/login', { base: '' })`.

```tsx
import { useRoute, configureRoute } from '@budarin/use-route';
configureRoute({ base: '/app' });

function AppUnderBase() {
    const { pathname, navigate } = useRoute();

    return (
        <div>
            <p>–¢–µ–∫—É—â–∏–π –ø—É—Ç—å: {pathname}</p>

            <button type="button" onClick={() => navigate('/dashboard')}>
                –í –¥–∞—à–±–æ—Ä–¥ ‚Üí /app/dashboard
            </button>

            <button type="button" onClick={() => navigate('/login', { base: '' })}>
                –ù–∞ –ª–æ–≥–∏–Ω (/login)
            </button>

            <button type="button" onClick={() => navigate('/auth/profile', { base: '/auth' })}>
                –í –¥—Ä—É–≥–æ–π —Ä–∞–∑–¥–µ–ª (/auth/profile)
            </button>
        </div>
    );
}
```

### 10. Section –≤ —Ö—É–∫–µ (options.section)

–ö–æ–≥–¥–∞ —É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–¥–µ–ª–æ–≤ –ø–æ —Å–≤–æ–∏–º –ø–æ–¥–ø—É—Ç—è–º (`/dashboard`, `/admin`, `/auth`), –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ä–∞–∑–¥–µ–ª–∞ –∑–∞–¥–∞–π—Ç–µ **section**: –≤—ã–∑–æ–≤–∏—Ç–µ `useRoute({ section: '/dashboard' })`. –¢–æ–≥–¥–∞ `navigate(to)` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–µ—Ñ–∏–∫—Å (base + section). <br />
–ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–±–µ–∑ —Å–µ–∫—Ü–∏–∏): `navigate('/', { section: '' })`. <br />
–ü–µ—Ä–µ—Ö–æ–¥ ¬´–≤–Ω–µ¬ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `navigate('/login', { base: '' })`.

```tsx
import { useRoute } from '@budarin/use-route';

const DASHBOARD_BASE = '/dashboard';

function DashboardSection() {
    // Section –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞: pathname –∏ navigate –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ /dashboard (–ø–æ–¥ –≥–ª–æ–±–∞–ª—å–Ω—ã–º base, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω)
    const { pathname, navigate } = useRoute({ section: DASHBOARD_BASE });

    return (
        <div>
            {/* –ü—Ä–∏ URL /dashboard/reports pathname === '/reports' */}
            <p>–†–∞–∑–¥–µ–ª Dashboard. –ü—É—Ç—å: {pathname}</p>

            <button type="button" onClick={() => navigate('/reports')}>
                –û—Ç—á—ë—Ç—ã ‚Üí /dashboard/reports
            </button>

            <button type="button" onClick={() => navigate('/settings')}>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí /dashboard/settings
            </button>

            {/* –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–±–µ–∑ —Å–µ–∫—Ü–∏–∏) –∏–ª–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é */}
            <button type="button" onClick={() => navigate('/', { section: '' })}>
                –ù–∞ –≥–ª–∞–≤–Ω—É—é
            </button>
        </div>
    );
}
```

### 11. initialLocation (SSR)

–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç `window`, –ø–æ—ç—Ç–æ–º—É —Ö—É–∫ –Ω–µ –∑–Ω–∞–µ—Ç URL –∑–∞–ø—Ä–æ—Å–∞. –ó–∞–¥–∞–π—Ç–µ `initialLocation` –≤ –∫–æ–Ω—Ñ–∏–≥–µ –æ–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä `request.url`) ‚Äî —Ç–æ–≥–¥–∞ `pathname` –∏ `searchParams` –±—É–¥—É—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—É. –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ `initialLocation` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

```tsx
// –°–µ—Ä–≤–µ—Ä–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (–ø—Å–µ–≤–¥–æ–∫–æ–¥: Express, Fastify, Next –∏ —Ç.–¥.)
import { configureRoute } from '@budarin/use-route';
import { renderToStaticMarkup } from 'react-dom/server';
import { App } from './App';

function handleRequest(req, res) {
    // –û–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ —Ä–µ–Ω–¥–µ—Ä–æ–º —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    configureRoute({ initialLocation: req.url });

    const html = renderToStaticMarkup(<App />);
    res.send(html);
}

// –í App –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç useRoute() ‚Äî –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–ª—É—á–∞—é—Ç pathname/searchParams –∏–∑ initialLocation
function App() {
    const { pathname, searchParams } = useRoute();
    return (
        <div>
            <p>Pathname: {pathname}</p>
            <p>Query: {searchParams.toString()}</p>
        </div>
    );
}
```

### 12. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç Link (–ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞-—Å—Å—ã–ª–∫–∏ –ø–æ–≤–µ—Ä—Ö —Ö—É–∫–∞. –ú–æ–∂–Ω–æ –≤–∑—è—Ç—å –∑–∞ –æ—Å–Ω–æ–≤—É –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø–æ–¥ —Å–µ–±—è: –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ø—Ä–µ—Ñ–µ—Ç—á, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Å—Ç–∏–ª–∏.

```tsx
import { useRoute } from '@budarin/use-route';
import { useCallback, type ComponentPropsWithoutRef } from 'react';

interface LinkProps extends ComponentPropsWithoutRef<'a'> {
    to: string;
    replace?: boolean;
}

function Link({ to, replace = false, onClick, ...props }: LinkProps) {
    const { navigate } = useRoute();

    const handleClick = useCallback(
        (e: React.MouseEvent<HTMLAnchorElement>) => {
            onClick?.(e);

            if (!e.defaultPrevented) {
                e.preventDefault();
                navigate(to, { history: replace ? 'replace' : 'push' });
            }
        },
        [navigate, to, replace, onClick]
    );

    return <a {...props} href={to} onClick={handleClick} />;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
// <Link to="/posts">–ü–æ—Å—Ç—ã</Link>
// <Link to="/users/123" replace>–ü—Ä–æ—Ñ–∏–ª—å (replace)</Link>
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è unit‚Äë—Ç–µ—Å—Ç–æ–≤ –≤ jsdom‚Äë–æ–∫—Ä—É–∂–µ–Ω–∏–∏ –µ—Å—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π helper `setupTestNavigation` –∏–∑ entrypoint‚Äë–∞ `@budarin/use-route/testing`. –û–Ω –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `window.location` –∏ `window.navigation` –ø–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–π URL –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç–∫–∞—Ç–∞.

```ts
import { beforeEach, afterEach, it, expect } from 'vitest';
import { renderHook } from '@testing-library/react';
import { useRoute } from '@budarin/use-route';
import { setupTestNavigation } from '@budarin/use-route/testing';

let restoreNavigation: () => void;

beforeEach(() => {
    restoreNavigation = setupTestNavigation({ initialUrl: 'http://localhost/users/123' });
});

afterEach(() => {
    restoreNavigation();
});

it('—á–∏—Ç–∞–µ—Ç pathname –∏ params –∏–∑ Navigation API', () => {
    const { result } = renderHook(() => useRoute('/users/:id'));
    expect(result.current.pathname).toBe('/users/123');
    expect(result.current.params).toEqual({ id: '123' });
});
```

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm i @budarin/use-route

pnpm add @budarin/use-route

yarn add @budarin/use-route
```

TypeScript: —Ç–∏–ø—ã –≤–∫–ª—é—á–µ–Ω—ã.

**`tsconfig.json` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**

```json
{
    "compilerOptions": {
        "lib": ["ES2021", "DOM", "DOM.Iterable"],
        "moduleResolution": "bundler",
        "jsx": "react-jsx"
    }
}
```

## ‚öõÔ∏è React

- –ü–∞–∫–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ **React 18+**: –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `useSyncExternalStore` –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ concurrent rendering, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–∞—á–∏–Ω–∞—è —Å React 18.

## üåê –ë—Ä–∞—É–∑–µ—Ä—ã –∏ Node.js

–ü–∞–∫–µ—Ç **—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ** —Ç–∞–º, –≥–¥–µ –µ—Å—Ç—å **Navigation API** –∏ **URLPattern**. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚Äî –≤–µ—Ä—Å–∏–∏ –Ω–∏–∂–µ; –±–µ–∑ –Ω–∏—Ö —Ö—É–∫ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

| API            | Chrome/Edge | Firefox | Safari | Node.js |
| -------------- | ----------- | ------- | ------ | ------- |
| Navigation API | 102+        | 109+    | 16.4+  | ‚Äî       |
| URLPattern     | 110+        | 115+    | 16.4+  | 23.8+   |


## üéõ –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º

- **Navigation API:** –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è `navigate`, `currententrychange`; –¥–ª—è same-origin –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ‚Äî –ø–µ—Ä–µ—Ö–≤–∞—Ç `navigate` –∏ –≤—ã–∑–æ–≤ `event.intercept()`
- `useSyncExternalStore` –Ω–∞ navigation —Å–æ–±—ã—Ç–∏—è
- LRU –∫—ç—à parsed URL (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ª–∏–º–∏—Ç)
- Map –¥–ª—è O(1) –ø–æ–∏—Å–∫–∞ `historyIndex`
- URLPattern –¥–ª—è `:params`
- –ö—ç—à compiled patterns; `clearRouteCaches()` ‚Äî –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–µ–π (—Ç–µ—Å—Ç—ã, —Å–º–µ–Ω–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
- SSR-safe (checks `typeof window`)

## ü§ù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© budarin
